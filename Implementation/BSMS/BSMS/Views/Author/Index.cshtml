@model IEnumerable<BSMS.bsms.localhost.AUTHOR>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_TLayout.cshtml";
}

<div class="container">
    <div class="col-lg-11 col-md-11 col-sm-11">
        <h2>Index</h2>

        <p>
            @Html.ActionLink("Create New", "Create")
        </p>
        <table class="table">
            <tr>
                <th>
                    Image
                </th>

                <th>
                    Full Name
                </th>
                <th>
                    Biography

                </th>
                <th>
                    Nick Name
                </th>
                <th style="width:8%"></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        <img src="@item.THUMBNAIL_PATH" style="width:100px" />
                    </td>
                    <td>
                        @item.FIRSTNAME @item.MIDDLENAME @item.LASTNAME
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.BIOGRAPHY)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ALIASNAME)
                    </td>

                    <td>
                        <a href='@Url.Action("Edit", "Author", new { id=item.AUTHORID })'>  <span class="glyphicon glyphicon-edit"></span> </a>
                        <a href='@Url.Action("Details", "Author", new { id=item.AUTHORID })'>  <span class="glyphicon glyphicon-eye-open"></span> </a>
                        <a onclick="confirmMessage(@item.AUTHORID)"> <span class="glyphicon glyphicon-remove"> </span> </a>
                    </td>
                </tr>
            }

        </table>

        </div></div>

        <script>
            function confirmMessage(id) {

                swal({
                    title: 'Are you sure, you want to delete this author including its books ?',
                    text: "You won't be able to revert this!",
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Yes, delete it!'
                }).then(function () {
                    swal({
                        title: 'Request Processing',
                        text: 'BSMS is processing your request',
                        timer: 20000
                    })
                    window.location = '@Url.Action("Delete", "Author")/' + id;
                }, function (dismiss) {
                    // dismiss can be 'cancel', 'overlay',
                    // 'close', and 'timer'
                    if (dismiss === 'cancel') {
                        swal(
                          'Cancelled',
                          'BSMS have cancel your request :)',
                          'error'
                        )
                    }
                })

            }
        </script>
