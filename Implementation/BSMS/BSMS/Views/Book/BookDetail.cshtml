@model BSMS.bsms.localhost.BOOK
@using BSMS.Models;
@using BSMS.Session;
@{
    ViewBag.Title = "BookDetail";
    ViewBag.Page = "Book";
    IEnumerable<BSMS.bsms.localhost.BOOK_IMAGE> bookImage = BSMS.Models.BookModel.GetBooksImages().Where(bi => bi.BOOKID == Model.BOOKID);
    SessionHandler loginSession = new SessionHandler();
}


<!-- Breadcrumbs -->
<div class="breadcrumb-container">
    <div class="container">
        <ol class="breadcrumb">
            <li><a href="index.html">Home</a></li>
            <li><a href="@Url.Action("BookList","Book")">Book</a></li>
            <li class="active"> @Model.NAME </li>
        </ol>
    </div>
</div>
<!-- End Breadcrumbs -->
<!-- Main Content -->
<div class="container m-t-3">
    <div class="row">

        <!-- Image List -->
        <div class="col-sm-4">
            <div class="image-detail">
                <img id="bookImage" style="transition: opacity 1s ease-in-out;" src="@bookImage.ElementAt(0).IMAGEPATH" data-zoom-image="images/demo/p1-large-1.jpg" alt="">
            </div>
            <div class="products-slider-detail m-b-2">

                @foreach (var image in bookImage)
                {
                    <div class="owl-item active" style="width: 51.25px; margin-right: 5px; float:left" onmouseover="changeImage('@image.IMAGEPATH')">
                        <a ><img src="@image.IMAGEPATH" alt="" class="img-thumbnail"></a>
                    </div>
                }

            </div>
            <br><br>
            <div class="title"><span>Share to</span></div>
            <div class="share-button m-b-3">
                <button type="button" class="btn btn-primary"><i class="fa fa-facebook"></i></button>
                <button type="button" class="btn btn-info"><i class="fa fa-twitter"></i></button>
                <button type="button" class="btn btn-danger"><i class="fa fa-google-plus"></i></button>
                <button type="button" class="btn btn-primary"><i class="fa fa-linkedin"></i></button>
                <button type="button" class="btn btn-warning"><i class="fa fa-envelope"></i></button>
            </div>
        </div>
        <!-- End Image List -->

        <div class="col-sm-8">
            <div class="title-detail">@Model.NAME </div>
            <table class="table table-detail">
                <tbody>
                    <tr>
                        <td>Price</td>
                        <td>
                            <div class="price">
                                <div>$@(Model.PRICE - ((Model.PRICE * Model.PERCENTAGE_OFF) / 100) ) <span class="label label-default arrowed">-@Model.PERCENTAGE_OFF%</span></div>
                                <span class="price-old">$@Model.PRICE</span>
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td>Genre</td>
                        <td>
                            @Model.GENRE.NAME
                        </td>
                    </tr>

                    <tr>
                        <td>Producer</td>
                        <td>
                            @Model.PRODUCER.NAME
                        </td>
                    </tr>

                    <tr>
                        <td>Language</td>
                        <td>
                            @Model.LANGUAGE.LANGUAGE1
                        </td>
                    </tr>

                    <tr>
                        <td>Reference</td>
                        <td>
                            @Model.REFERENCE
                        </td>
                    </tr>

                    <tr>
                        <td> Synoposis </td>
                        <td>
                            @Model.SYNOPOSIS
                        </td>
                    </tr>

                    @{
                        if (BookModel.getBookSoftCopy(Model.BOOKID).Count > 0 && loginSession.AuthenticatedUser() != null)
                        {
                            int count = 1;
                            <tr>
                                <td> Book Soft Copy </td>
                                <td>
                                    
                                    @foreach (var bCopy in BookModel.getBookSoftCopy(Model.BOOKID))
                                    {
                                        <a href="@bCopy.FILEPATH" target="_blank"> Read Version @count Online </a>
                                        <br>
                                        <a href="@bCopy.FILEPATH" download> Download Version @count Online </a>
                                        <br><br>
                                        count++;
                                    }
                                </td>
                            </tr>
                        }
                    }

                </tbody>
            </table>
        </div>
        <div class="col-md-8">

            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#desc" aria-controls="desc" role="tab" data-toggle="tab">Description</a></li>
                <li role="presentation"><a href="#detail" aria-controls="detail" role="tab" data-toggle="tab">Detail</a></li>
                <li role="presentation"><a href="#author" aria-controls="author" role="tab" data-toggle="tab">Author </a></li>
            </ul>
            <!-- End Nav tabs -->
            <!-- Tab panes -->
            <div class="tab-content tab-content-detail">

                <!-- Description Tab Content -->
                <div role="tabpanel" class="tab-pane active" id="desc">
                    <div class="well">
                        <p>
                            @Model.SYNOPOSIS
                        </p>
                    </div>
                </div>
                <!-- End Description Tab Content -->
                <!-- Detail Tab Content -->
                <div role="tabpanel" class="tab-pane" id="detail">
                    <div class="well">
                        <table class="table table-bordered">
                            <tbody>
                                <tr>
                                    <td>Producer</td>
                                    <td>@Model.PRODUCER.NAME</td>
                                </tr>
                                <tr>
                                    <td>ISBN NUMBER</td>
                                    <td>@Model.ISBN_NUMBER</td>
                                </tr>
                                <tr>
                                    <td>Reference</td>
                                    <td>@Model.REFERENCE</td>
                                </tr>
                                <tr>
                                    <td>Genre</td>
                                    <td>@Model.GENRE.NAME</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- End Detail Tab Content -->
                <!-- Description Tab Content -->
                <div role="tabpanel" class="tab-pane active" id="author">
                    <div class="well">

                        <p>
                            Author's Information goes here
                        </p>
                    </div>
                </div>
                <!-- End Description Tab Content -->
            </div>
        </div>
    </div>

    <div>
        <center>
        <div class="title"> <span> Authors of this Book </span> </div>
        @foreach (var item in AuthorModel.BookAuthor(Model.BOOKID))
        {
            <div class="col-sm-3 col-lg-3 box-product-outer">
                <div class="box-product">
                    <div class="img-wrapper">
                        <a href="@Url.Action("AuthorDetail", "Author", new { id = item.AUTHORID })">

                            <div style="height:300px; background-image:url(@item.THUMBNAIL_PATH); background-size:100%"></div>
                        </a>
                        <div class="tags">
                            <span class="label-tags"><span class="label label-default arrowed">New</span></span>
                        </div>
                        <div class="tags tags-left">
                            <span class="label-tags"><span class="label label-danger arrowed-right">Sale</span></span>
                        </div>
                        <div class="option">
                            <a href="#" data-toggle="tooltip" title="Add to Cart"><i class="fa fa-shopping-cart"></i></a>

                            <a href="@Url.Action("AuthorDetail", "Author", new { id = item.AUTHORID })" data-toggle="tooltip" title="Books By This Author" class=""><i class="fa fa-book"></i></a>

                        </div>
                    </div>
                    <h6><a href="detail.html"> @item.FIRSTNAME @item.LASTNAME </a></h6>
                    <div class="price">
                        <div> Number of Books <span>@BookModel.CountBookByAuthor(item.AUTHORID)</span> </div>

                    </div>
                    <div class="rating" style="max-height:120px; overflow-x:scroll; overflow-y:no-display">
                        <p> @item.BIOGRAPHY </p>
                    </div>
                </div>

            </div>
        }
        </center>
    </div>

</div>

<script>
    function changeImage(imgPath) {
       // swal('trigged');
        document.getElementById("bookImage").src = imgPath;
    }
</script>